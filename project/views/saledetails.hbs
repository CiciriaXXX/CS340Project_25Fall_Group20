 {{!--
 Citation for the following code:
 Date: 11/19/2025
 This file's structure is adapted from the OSU CS 340 starter code.
 All variables, queries, and application-specific logic have been rewritten 
 for our project requirements.
 https://canvas.oregonstate.edu/courses/2017561/pages/exploration-web-application-technology-2?module_item_id=25645131
 https://canvas.oregonstate.edu/courses/2017561/pages/exploration-implementing-cud-operations-in-your-app?module_item_id=25645149
 --}}
 
<h1>Sale Details</h1>

{{! READ table }}
<table>
  <thead>
    <tr>
      <th>Sale Detail ID</th>
      <th>Sale ID</th>
      <th>Product Name</th>
      <th>Quantity</th>
      <th>Unit Price</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    {{#each saledetails}}
    <tr>
      <td>{{this.saleDetailID}}</td>
      <td>{{this.saleID}}</td>
      <td>{{this.productName}}</td>
      <td>{{this.quantity}}</td>
      <td>{{this.unitPrice}}</td>

      {{! DELETE form }}
      <form id='delete_saledetail_form'>
        <input type='hidden' name='delete_saledetail_id' value='{{this.saleDetailID}}' />
        <td><button type='submit'>Delete</button></td>
      </form>
    </tr>
    {{/each}}
  </tbody>
</table>

{{! CREATE form }}
<h2>Add a New Sale Detail</h2>
<form class="cuForm" id="create_saledetail_form">
  <label for="create_sale_ID_from_dropdown_Input">Sale:</label>
  <select name="create_sale_ID_from_dropdown_Input" id="create_sale_ID_from_dropdown_Input" required>
    <option value="" disabled selected>Select a Sale</option>
    {{#each sales}}
    <option value="{{this.saleID}}">{{this.saleID}}</option>
    {{/each}}
  </select>

  <label for="create_product_ID_from_dropdown_Input">Product:</label>
  <select name="create_product_ID_from_dropdown_Input" id="create_product_ID_from_dropdown_Input" required>
    <option value="" disabled selected>Select a Product</option>
    {{#each products}}
    <option value="{{this.productID}}">{{this.productName}}</option>
    {{/each}}
  </select>

  <label for="create_quantityInput">Quantity:</label>
  <input type="number" name="create_quantityInput" id="create_quantityInput" min="1" required>

  <label for="create_unitPriceInput">Unit Price:</label>
  <input type="number" name="create_unitPriceInput" id="create_unitPriceInput" min="0" step="0.01" required>

  <input type="submit" value="Add Sale Detail">
</form>

{{! UPDATE form }}
<h2>Update a Sale Detail</h2>
<form class="cuForm" id="update_saledetail_form">
  <label for="update_sale_detail_ID_from_dropdown_Input">Select Sale Detail:</label>
  <select name="update_sale_detail_ID_from_dropdown_Input" id="update_sale_detail_ID_from_dropdown_Input" required>
    <option value="" disabled selected>Select a Sale Detail</option>
    {{#each saledetails}}
    <option value="{{this.saleDetailID}}">{{this.saleDetailID}}</option>
    {{/each}}
  </select>

  <label for="update_sale_ID_from_dropdown_Input">Sale:</label>
  <select name="update_sale_ID_from_dropdown_Input" id="update_sale_ID_from_dropdown_Input" required>
    <option value="" disabled selected>Select a Sale</option>
    {{#each sales}}
    <option value="{{this.saleID}}">{{this.saleID}}</option>
    {{/each}}
  </select>

  <label for="update_product_ID_from_dropdown_Input">Product:</label>
  <select name="update_product_ID_from_dropdown_Input" id="update_product_ID_from_dropdown_Input" required>
    <option value="" disabled selected>Select a Product</option>
    {{#each products}}
    <option value="{{this.productID}}">{{this.productName}}</option>
    {{/each}}
  </select>

  <label for="update_quantityInput">Quantity:</label>
  <input type="number" name="update_quantityInput" id="update_quantityInput" min="1"required>

  <label for="update_unitPriceInput">Unit Price:</label>
  <input type="number" name="update_unitPriceInput" id="update_unitPriceInput" min="0" step="0.01"required>

  <input type="submit" value="Update Sale Detail">
</form>
